@model InvoiceApplication.Models.Invoice_Table

@{
    ViewData["Title"] = "DeleteInvoice";
}

@* <h1>DeleteInvoice</h1>

<h3>Are you sure you want to delete this?</h3>
<div>
    <h4>Invoice_Table</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Invoice_Date)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Invoice_Date)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Billing_Name)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Billing_Name)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Shipping_Name)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Shipping_Name)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.BillingAddress_Address)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.BillingAddress_Address)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.BillingAddress_City)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.BillingAddress_City)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.BillingAddress_State)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.BillingAddress_State)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.BillingAddress_Phone)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.BillingAddress_Phone)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ShippingAddress_Address)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ShippingAddress_Address)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ShippingAddress_City)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ShippingAddress_City)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ShippingAddress_State)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ShippingAddress_State)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ShippingAddress_Phone)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ShippingAddress_Phone)
        </dd>
    </dl> *@

<div class="d-flex justify-content-end gap-3 my-3">
    @* <a asp-action="EditInvoice" asp-route-id="@Model?.Invoice_Number" class="btn btn-success">Edit Invoice</a>
    <a asp-action="Index" class="btn btn-primary">Close</a> *@
    <div>
        <form asp-action="DeleteInvoices" method="post">
            <input type="hidden" asp-for="Invoice_Number" readonly />
            <button type="submit" class="btn btn-danger">Delete</button> |
            <a asp-action="Index" class="btn btn-primary">Cancel</a>
        </form>
    </div>
</div>
<div>
    <div class="border border-4 p-2">
        <div class="d-flex justify-content-between">
            <div id="logo">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRj3pdj-zB2d6hgRSNL4HueqCVAzC1s8DBNqg&s" height="100px" width="200px" />
            </div>
            <div class="align-content-center">
                <h1 class="font-monospace">Order Bill </h1>

            </div>
            <div class="text-end align-content-center">
                <b class="text-black-50"> Date : @Html.DisplayFor(model => model.Invoice_Date)</b>
            </div>
        </div>
        <hr />

        <div class="d-flex  justify-content-between ">
            <div>
                From <br />
                <strong>@Html.DisplayFor(model => model.Billing_Name)</strong><br />
                @Html.DisplayFor(model => model.BillingAddress_Address)<br />
                @Html.DisplayFor(model => model.BillingAddress_City),&nbsp;@Html.DisplayFor(model => model.BillingAddress_State)<br />
                Phone (@Html.DisplayFor(model => model.BillingAddress_Phone))
            </div>
            <div>
                To <br />
                <strong>@Html.DisplayFor(model => model.Shipping_Name)</strong><br />
                @Html.DisplayFor(model => model.ShippingAddress_Address)<br />
                @Html.DisplayFor(model => model.ShippingAddress_City),&nbsp;@Html.DisplayFor(model => model.ShippingAddress_State)<br />
                Phone (@Html.DisplayFor(model => model.ShippingAddress_Phone))
            </div>
            <div class="align-content-center">
                <strong>InvoiceNumber</strong> : #@Html.DisplayFor(model => model.Invoice_Number)<br />
                <strong>Payment Due</strong>: @Html.DisplayFor(model => model.Invoice_Date_Plus20)
            </div>
        </div>
        <div>
            <table class="table table-bordered mt-4 table-striped">
                <thead>
                    <tr>
                        <th>Qty</th>
                        <th>Product Name</th>
                        <th>Serial #</th>
                        <th>Price</th>
                        <th>Total</th>
                    </tr>
                </thead>

                <tbody>
                    @if (Model.Products?.Count > 0)
                    {
                        int i = 1;
                        foreach (var p in Model.Products)
                        {
                            <tr>
                                <td>+@p.Qty</td>
                                <td>@p.Name</td>
                                <td>@p.Detail_Id</td>
                                <td>@p.Price</td>
                                <td>₹&nbsp;@p.Total</td>
                            </tr>

                            i++;
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="5" class="text-center text-danger">
                                No Products Found
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <div >
            <div class="p-2 border border-2">
                <h4 class="" style="font-weight :   300">Amount Due <i>@Html.DisplayFor(model => model.Invoice_Date_Plus20)</i></h4>
                @{
                    decimal subtotal = Model.Products.Sum(x => x.Total ?? 0);
                    decimal tax = Math.Round(subtotal * 0.09m, 2);
                    decimal charge;
                    if(subtotal > 0)
                    {
                        charge = 50;
                    }
                    else
                    {
                        charge = 0;
                    }

                    decimal finalTotal = subtotal + tax + charge;
                }
                <table class="table table-bordered table-striped">
                    <tr>
                        <th>Subtotal</th>
                        <td>₹@subtotal</td>
                    </tr>
                    <tr>
                        <th>Tax (9.3%)</th>
                        <td>₹@tax</td>
                    </tr>
                    <tr>
                        <th>Shipping:</th>
                        <td>₹@charge</td>
                    </tr>
                    <tr>
                        <th>Total:</th>
                        <td class="bg-success text-warning"><b>₹@finalTotal</b></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

